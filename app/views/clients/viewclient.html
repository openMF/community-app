<div class="col-md-12" ng-controller="ViewClientController">
	<div>
	    <ul class="breadcrumb">
	        <li>{{client.officeName}}</li>
	        <li data-ng-show="client.staffName">{{client.staffName}}</li>
			<li class="active">{{client.displayName}}</li>
	    </ul>
	</div>
	<hr style="margin-bottom:0; margin-top:0">
	<div>
	     <ul class="breadcrumb">
        	<li>
				<h3 class="client-title"> 
                    <i class="icon-circle {{client.status.code | StatusLookup}}"></i>&nbsp;
            	    <i class="icon-user"></i>&nbsp;
                    <strong>{{client.displayName}}</strong>
                </h3>
            </li>
            <li> 
            	 <i class="icon-barcode"></i>&nbsp;
                 <small> {{ 'label.heading.clientno' | translate }}: {{client.accountNo}} </small>
            </li>
            <li data-ng-show="client.externalId">
            	<i class="icon-barcode"></i>&nbsp;
                <small> {{ 'label.input.externalid' | translate }}: {{client.externalId}} </small>
            </li>
			<li>
				<i class="icon-building"></i>&nbsp; 
				<small> {{ 'label.heading.office' | translate }}: "{{client.officeName}}" </small>
			</li>
            <li data-ng-show="client.staffName"> 
            	<i class="icon-user"></i>&nbsp;
                <small> {{ 'label.input.staff' | translate }}: {{client.staffName}} </small> 
            </li>
         </ul>
	</div>
	
	<script type="text/ng-template" id="deleteClient.html">
		<div class="modal-header silver">
			<h3 class="bolder">{{'label.heading.delete' | translate}}</h3>
		</div>
		<div class="modal-body">
			<api-validate></api-validate>
		</div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
			<button class="btn btn-primary" ng-click="delete()">{{'label.button.confirm' | translate}}</button>
		</div>
	</script>

    <script type="text/ng-template" id="photo-dialog.html">
        <div class="modal-header silver">
            <h3 class="bolder">{{'label.heading.clientimage' | translate}}</h3>
        </div>
		<br/>
        <div align="center">
            <img ng-src="{{largeImage}}" alt="Avatar">
        </div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
		</div>
    </script>

    <script type="text/ng-template" id="sign-dialog.html">
        <div class="modal-header silver">
            <h3 class="bolder">{{'label.heading.clientsignature' | translate}}</h3>
        </div>
		<br/>
        <div align="center">
			<img height="500" ng-src="{{largeSignature}}" alt="Avatar"/>
        </div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
		</div>
    </script>
	
	<script type="text/ng-template" id="uploadpic.html">
		<div class="modal-header silver">
			<h3 class="bolder">{{'label.heading.selectclientimage' | translate}}</h3>
		</div>
		<div class="modal-body">
			<api-validate></api-validate>
			<br>
			<input type="file" ng-file-select="onFileSelect($files)">
		</div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
			<button class="btn btn-primary" ng-click="upload()">{{'label.button.upload' | translate}}</button>
		</div>
	</script>
	
	<script type="text/ng-template" id="clientunassignstaff.html">
		<div class="modal-header silver">
			<h3 class="bolder">{{'label.heading.unassignstaff' | translate}}</h3>
		</div>
		<div class="modal-body">
			<api-validate></api-validate>
		</div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
			<button class="btn btn-primary" ng-click="unassign()">{{'label.button.confirm' | translate}}</button>
		</div>
	</script>
	
	<script type="text/ng-template" id="uploadsig.html">
	    <div class="modal-header silver">
	        <h3 class="bolder">{{'label.heading.selectclientsignature' | translate}}</h3>
	    </div>
	    <div class="modal-body">
	        <api-validate></api-validate>
	        <br>
	        <input type="file" ng-file-select="onFileSelect($files)">
	    </div>
	    <div class="modal-footer">
	        <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
	        <button class="btn btn-primary" ng-click="upload()">{{'label.button.upload' | translate}}</button>
	    </div>
	</script>
	
	<tabset class="overflowhidden marginbottom0">
		<tab heading="{{'label.heading.general' | translate}}">
			<div class="col-md-12 col-sm-12">
				<div class="row primarydiv">
				    <div class="pull-right">
						<span ng-repeat="button in buttonsArray.singlebuttons">
						  <a href="{{button.href}}/{{client.id}}/{{button.subhref}}" class="btn btn-primary" has-permission="{{button.taskPermissionName}}">
                          	<i class="{{button.icon}} icon-white"></i>&nbsp;{{button.name | translate}}</a>
						</span>
				        <a class="btn btn-primary" data-ng-click="deleteClient()" data-ng-show="client.status.value=='Pending'" has-permission="DELETE_CLIENT">
                        	<i class="icon-trash icon-white"></i>&nbsp;{{"label.button.delete" | translate}}</a>                        
				        <a class="btn btn-primary" data-ng-click="unassignStaffCenter()" data-ng-show="client.staffId" has-permission="UNASSIGNSTAFF_CLIENT">
                        	<i class="icon-user icon-white"></i>&nbsp;{{"label.button.unassignstaff" | translate}}</a>
						<span ng-show="buttonsArray.options" class="btn-group dropdown" on-toggle="toggled(open)">
							<a class="btn btn-primary dropdown-toggle">
								{{ 'label.button.more' | translate}}
								<span class="caret"></span>
							</a>
							<ul class="dropdown dropdown-menu dropdown-menu-right">
								<li class="{{button.icon}}" ng-repeat="button in buttonsArray.options">
									<a href="#/clientscreenreport/{{client.id}}" has-permission="{{button.taskPermissionName}}">{{'label.'+ button.name | translate}}</a>
								</li>
							<li>
								<a data-ng-click="uploadPic()" has-permission="CREATE_CLIENTIMAGE">{{'label.button.uploadpic' | translate}}</a>
							</li>
							<li>
								<a data-ng-click="uploadSig()" has-permission="CREATE_CLIENTIMAGE">{{'label.button.uploadsig' | translate}}</a>
							</li>
							</ul>
						</span>
				    </div>
				</div>
				<div class="row client">
				    <div class="col-sm-9 col-md-9 paddingleft0px">
				    	<div data-ng-show="client.status.value=='Closed'">
				            <h3>{{'label.heading.clientclosed' | translate}}</h3>
				        </div>
						<table class="table table-striped">
							<thead>
								<tr class="graybg">
									<th class="boldlabel" colspan="2"><strong>{{client.displayName}} {{ 'label.heading.details' | translate }}</strong></th>
								</tr>
							</thead>						
							<tbody>
								<tr>
									<th class="table-bold">{{ 'label.input.activationdate' | translate }}</th>
									<td><span class="padded-td">{{client.timeline.activatedOnDate | DateFormat}}<span data-ng-hide="client.timeline.activatedOnDate">{{ 'label.notactivated' | translate }}</span></span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.heading.memberof' | translate }}</th>
									<td>
										<span class="padded-td" data-ng-hide="client.groups">{{ 'label.unassigned' | translate }}</span>
										<span class="padded-td" ng-repeat="group in client.groups">
										 <a class="list-group-item-text" href="#/viewgroup/{{group.id}}">{{group.name}}</a>&nbsp;<span data-ng-hide="client.groups">{{ 'label.unassigned' | translate }}</span><span ng-show="!$last">&nbsp;&nbsp;&nbsp;|</span>
										</span>
									</td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.input.firstname' | translate }}</th>
									<td><span class="padded-td">{{client.firstname}}</span></td>
								</tr>
								<tr data-ng-show="client.middlename">
									<th class="table-bold">{{ 'label.input.middlename' | translate }}</th>
									<td><span class="padded-td">{{client.middlename}}</span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.input.lastname' | translate }}</th>
									<td><span class="padded-td">{{client.lastname}}</span></td>
								</tr>
								<tr data-ng-show="client.mobileNo">
									<th class="table-bold">{{ 'label.input.mobilenumber' | translate }}</th>
									<td><span class="padded-td">{{client.mobileNo}}</span>
									</td>
								</tr>
								<tr data-ng-show="client.gender.name">
									<th class="table-bold">{{ 'label.input.gender' | translate }}</th>
									<td><span class="padded-td">{{client.gender.name}}</span>
									</td>
								</tr>
								<tr data-ng-show="client.clientType.name">
									<th class="table-bold">{{ 'label.input.clienttype' | translate }}</th>
									<td><span class="padded-td">{{client.clientType.name}}</span>
									</td>
								</tr>
								<tr data-ng-show="client.clientClassification.name">
									<th class="table-bold">{{ 'label.input.clientclassification' | translate }}</th>
									<td><span class="padded-td">{{client.clientClassification.name}}</span>
									</td>
								</tr>
								<tr data-ng-show="client.dateOfBirth">
									<th class="table-bold">{{ 'label.input.dateofbirth' | translate }}</th>
									<td><span class="padded-td">{{client.dateOfBirth | DateFormat}}</span>
									</td>
								</tr>
								<tr data-ng-show="client.status.value=='Closed'">
									<th class="table-bold">{{ 'label.heading.closedate' | translate }}</th>
									<td><span class="padded-td">{{client.timeline.closedOnDate | DateFormat}}</span></td>
								</tr>                    
							</tbody>
						</table>
				    </div>
				    <div class="col-sm-3 col-md-3">
				    	<div class="thumbnail row">
				    		<h4 ng-show="client.imagePresent" align="center"><strong>{{'label.heading.clientimage' | translate}}</strong></h4>
				    		<h4 ng-hide="client.imagePresent" align="center"><strong>{{'label.heading.noclientimage' | translate}}</strong></h4>
					    	<img ng-hide="client.imagePresent" ng-src="./images/client-image-placeholder.png" alt="Avatar">
				        	<img ng-show="client.imagePresent" ng-src="{{image}}" alt="Avatar" data-ng-click="showPicture()">
				        	<div ng-show="client.imagePresent" class="show-large-picture" data-ng-click="showPicture()">{{'label.zoom' | translate}}</div>
                            <hr class="marginbottom">
							<h4 ng-show="signature_url" align="center"><strong>{{'label.heading.clientsignature' | translate}}</strong></h4>
							<h4 ng-hide="signature_url" align="center"><strong>{{'label.heading.noclientsignature' | translate}}</strong></h4>
					    	<img ng-hide="signature_url" ng-src="./images/client-signature-placeholder.png" alt="Signature">
							<img ng-show="signature_url" ng-src="{{signature_url}}" alt="Signature" data-ng-click="showPicture(true)">
                            <div ng-show="signature_url" class="show-large-picture" data-ng-click="showPicture(true)">{{'label.zoom' | translate}}</div>
							<br>
				    	</div>
				    </div>
				</div>
			</div>
		</tab>
		<tab heading="{{'label.heading.accounts' | translate}}" data-ng-show="client.status.value=='Active'">
			<div class="col-md-12 col-sm-12">
				<div class="row primarydiv">
					<div class="btn-group pull-right">
						<a href="#/newclientloanaccount/{{client.id}}" class="btn btn-primary" has-permission="CREATE_LOAN">
							<i class="icon-plus icon-white"></i>&nbsp;{{"label.button.newloan" | translate}}
						</a>
						<a href="#/new_client_saving_application/{{client.id}}" class="btn btn-primary" has-permission="CREATE_SAVINGSACCOUNT">
							<i class="icon-plus icon-white"></i>&nbsp;{{"label.button.newsaving" | translate}}
						</a>
						<a href="#/client/{{client.id}}/updatedefaultaccount" class="btn btn-primary" data-ng-show="updateDefaultSavings" has-permission="UPDATESAVINGSACCOUNT_CLIENT">
							<i class="icon-edit icon-white"></i>&nbsp;{{"label.button.updatedefaultsavings" | translate}}
						</a>
						<span ng-show="buttonsArray.options" class="btn-group dropdown" on-toggle="toggled(open)">
							<a class="btn btn-primary dropdown-toggle">
								{{ 'label.button.more' | translate}}
								<span class="caret"></span>
							</a>
							<ul class="dropdown dropdown-menu dropdown-menu-right">
								<li data-ng-show="clientAccounts.savingsAccounts">
									<a data-ng-click="viewstandinginstruction()" has-permission="CREATE_STANDINGINSTRUCTION">{{'label.button.viewstandinginstruction' | translate}}</a>
								</li>
								<li data-ng-show="clientAccounts.savingsAccounts">
									<a data-ng-click="createstandinginstruction()" has-permission="READ_STANDINGINSTRUCTION">{{'label.button.createstandinginstruction' | translate}}</a>
								</li>
								<li class="{{button.icon}}" has-permission="CREATE_FIXEDDEPOSITACCOUNT">
									<a href="#/newclientfixeddepositaccount/{{client.id}}">{{'label.newfixeddepositaccount' | translate}}</a>
								</li>
								<li class="{{button.icon}}" has-permission="CREATE_RECURRINGDEPOSITACCOUNT">
									<a href="#/newclientrecurringdepositaccount/{{client.id}}">{{'label.newrecurringdepositaccount' | translate}}</a>
								</li>
							</ul>
						</span>
					</div>
				</div>
				<div class="row client">
					<table class="table table-striped">
						<thead>
							<tr class="graybg">
								<th colspan="4" class="boldlabel">
									<strong>{{ 'label.heading.performancehistory' | translate }}</strong>							
									<a class="btn btn-primary btn-group pull-right" ng-click="showPerformanceDetails=!showPerformanceDetails">
										<i ng-show="showPerformanceDetails" class="icon-minus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.hidedetails' | translate }}</i>
										<i ng-show="!showPerformanceDetails" class="icon-plus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.showdetails' | translate }}</i>
									</a>
								</th>
							</tr>
						</thead>
						<tbody ng-show="showPerformanceDetails">
							<tr>
								<th width="25%" class="table-bold">{{ 'label.heading.numofloancycle' | translate }}</th>
								<td width="25%"><span class="padded-td">{{client.ClientSummary.loanCycle}}</span></td>
								
								<th width="25%" class="table-bold">&nbsp;&nbsp;{{ 'label.numofactivesavings' | translate }}</th>
								<td width="25%"><span class="padded-td">{{client.ClientSummary.activeSavings}}</span></td>
							</tr>
							<tr>
								<th class="table-bold">{{ 'label.numofactiveloans' | translate }}</th>
								<td><span class="padded-td">{{client.ClientSummary.activeLoans}}</span></td>
								
								<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactivefdsavings' | translate }}</th>
								<td><span class="padded-td"> - </span></td>
							</tr>
							<tr>
								<th class="table-bold">{{ 'label.lastloanamount' | translate }}</th>
								<td><span class="padded-td">{{client.ClientSummary.lastLoanAmount}}</span></td>
								
								<th class="table-bold">&nbsp;&nbsp;{{ 'label.totalsavings' | translate }}</th>
								<td><span class="padded-td">{{client.ClientSummary.totalSavings}}</span></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="row client">
					<div data-ng-show="client.status.value=='Closed'">
						<h3>{{'label.heading.clientclosed' | translate}}</h3>
					</div>
					<div>
						<div data-ng-show="clientAccounts.loanAccounts">
							<table class="table" data-ng-show="openLoan">
								<thead>
									<tr class="graybg">
										<th colspan="7" class="boldlabel">
											<strong>{{ 'label.heading.loanaccoverview' | translate }}</strong>
											<a class="btn btn-primary btn-group pull-right" ng-click="setLoan()">
												{{'label.button.viewclosedloans' | translate }}
												<a class="btn btn-primary btn-group pull-right" ng-click="showLoanDetails=!showLoanDetails">
													<i ng-show="showLoanDetails" class="icon-minus icon-white"></i>
													<i ng-show="!showLoanDetails" class="icon-plus icon-white"></i>
												</a>
											</a>
										</th>
									</tr>
								</thead>
								<thead>
									<tr class="graybg">
										<th>{{'label.heading.accnum' | translate}}</th>
										<th>{{'label.heading.loanaccount' | translate}}</th>
						                <th>{{'label.heading.loanamount' | translate}}</th>
						                <th>{{'label.heading.outstandingamount' | translate}}</th>
						                <th>{{'label.heading.dueamount' | translate}}</th>
										<th class="center">{{'label.heading.type' | translate}}</th>
										<th>{{ 'label.heading.actions' | translate }}</th>
									</tr>
								</thead>
								<tbody ng-show="showLoanDetails">
									<tr class="pointer-main" ng-repeat="loanaccount in clientAccounts.loanAccounts | orderBy:'id':true | filter:isLoanNotClosed">
									<td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">
										<i ng-hide="loanaccount.inArrears" tooltip-placement="right" tooltip="{{loanaccount.status.value}}" class="icon-stop {{loanaccount.status.code | StatusLookup}}"></i>
										<i ng-show="loanaccount.inArrears" tooltip-placement="right" tooltip="{{loanaccount.status.value}}" class="icon-stop {{loanaccount.status.code | StatusLookup}}overdue"></i>
										{{loanaccount.accountNo}}
									</td>
                                    <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.productName}}</td>
                                    <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.originalLoan}}</td>
                                    <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.loanBalance}} </td>
                                    <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.amountPaid}}</td>
                                    <td class="pointer center" data-ng-click="routeToLoan(loanaccount.id)" ng-if="loanaccount.loanType.value == 'Individual'">
										<i tooltip="{{loanaccount.loanType.value}}" class="icon-user icon-large"></i>
									</td>
									<td class="pointer center" data-ng-click="routeToLoan(loanaccount.id)" ng-if="loanaccount.loanType.value != 'Individual'">
										<i tooltip="{{loanaccount.loanType.value}}" class="icon-group icon-large"></i>
									</td>
									<td class="pointer center" ng-if="loanaccount.status.active">
										<a tooltip="{{'label.button.makerepayment' | translate}}" ng-href="#/loanaccount/{{loanaccount.id}}/repayment" 
											class="btn btn-primary btn-group ng-binding pull-left">
											<i class="icon-dollar icon-white"></i>&nbsp;{{'label.button.makerepayment' | translate}}
										</a>
									</td>
									<td class="pointer center" ng-if="loanaccount.status.pendingApproval">
										<a tooltip="{{'label.button.approve' | translate}}" ng-href="#/loanaccount/{{loanaccount.id}}/approve" 
											class="btn btn-success btn-group ng-binding pull-left">
											<i class="icon-ok icon-white"></i>&nbsp;{{'label.button.approve' | translate}}
										</a>
									</td>
									<td class="pointer center" ng-if="!loanaccount.status.pendingApproval &amp;&amp; !loanaccount.status.active">
										<a tooltip="{{'label.button.undoapproval' | translate}}" ng-href="#/loanaccount/{{loanaccount.id}}/undoapproval" 
											class="btn btn-warning ng-binding pull-left">
											<i class="icon-undo icon-white"></i>&nbsp;{{'label.button.undoapproval' | translate}}
										</a>		
										<a tooltip="{{'label.button.disburse' | translate}}" ng-href="#/loanaccount/{{loanaccount.id}}/disburse" 
											class="btn btn-success btn-group ng-binding pull-left">
											<i class="icon-flag icon-white"></i>&nbsp;{{'label.button.disburse' | translate}}
										</a>
									</td>
									</tr>
								</tbody>
							</table>
							<table class="table" data-ng-show="!openLoan">
								<thead>
									<tr class="graybg">
										<th colspan="7" class="boldlabel">
											<strong>{{ 'label.heading.loanaccoverview' | translate }}</strong>
											<a class="btn btn-primary btn-group pull-right" ng-click="setLoan()">
												{{'label.button.viewactiveloans' | translate }}
												<a class="btn btn-primary btn-group pull-right" ng-click="showLoanDetails=!showLoanDetails">
													<i ng-show="showLoanDetails" class="icon-minus icon-white"></i>
													<i ng-show="!showLoanDetails" class="icon-plus icon-white"></i>
												</a>
											</a>
										</th>
									</tr>
								</thead>
								<thead>
									<tr class="graybg">
										<th>{{'label.heading.accnum' | translate}}</th>
										<th>{{'label.heading.loanaccount' | translate}}</th>
						                <th>{{'label.heading.loanamount' | translate}}</th>
						                <th>{{'label.heading.outstandingamount' | translate}}</th>
						                <th>{{'label.heading.dueamount' | translate}}</th>
										<th class="center">{{'label.heading.type' | translate}}</th>
										<th>{{'label.heading.closedate' | translate}}</th>
									</tr>
								</thead>
								<tbody ng-show="showLoanDetails">
									<tr class="pointer-main" ng-repeat="loanaccount in clientAccounts.loanAccounts | orderBy:'id':true | filter:isClosed">
										<td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">
											<i tooltip-placement="right" tooltip="{{loanaccount.status.value}}" class="icon-stop {{loanaccount.status.code | StatusLookup}}"></i>
											{{loanaccount.accountNo}}
										</td>
										<td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.productName}}</td>
                                        <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.originalLoan}}</td>
                                        <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.loanBalance}}</td>
                                        <td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">{{loanaccount.amountPaid}}</td>
										<td class="pointer center" data-ng-click="routeToLoan(loanaccount.id)" ng-if="loanaccount.loanType.value == 'Individual'">
											<i tooltip="{{loanaccount.loanType.value}}" class="icon-user icon-large"></i>
										</td>
										<td class="pointer center" data-ng-click="routeToLoan(loanaccount.id)" ng-if="loanaccount.loanType.value != 'Individual'">
											<i tooltip="{{loanaccount.loanType.value}}" class="icon-group icon-large"></i>
										</td>
										<td class="pointer" data-ng-click="routeToLoan(loanaccount.id)">
											<span data-ng-show="loanaccount.timeline.closedOnDate">{{loanaccount.timeline.closedOnDate | DateFormat}}</span>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div data-ng-show="clientAccounts.savingsAccounts">
							<table class="table" data-ng-show="openSaving">
								<thead>
									<tr class="graybg">
										<th colspan="4" class="boldlabel">
											<strong>{{'label.heading.savingsaccoverview' | translate }}</strong>
											<a class="btn btn-primary btn-group pull-right" ng-click="setSaving()">
												{{'label.button.viewclosedsavings' | translate }}
												<a class="btn btn-primary btn-group pull-right" ng-click="showSavingDetails=!showSavingDetails">
													<i ng-show="showSavingDetails" class="icon-minus icon-white"></i>
													<i ng-show="!showSavingDetails" class="icon-plus icon-white"></i>
												</a>
											</a>
										</th>
									</tr>
								</thead>    
								<thead>
									<tr class="graybg">
										<th>{{'label.heading.accnum' | translate}}</th>
										<th>{{'label.heading.savingaccount' | translate}}</th>
										<th class="center">{{'label.heading.balance' | translate}}</th>
										<th>{{ 'label.heading.actions' | translate }}</th>
									</tr>
								</thead>    
								<tbody ng-show="showSavingDetails">
									<tr class="pointer-main" ng-repeat="savingaccount in clientAccounts.savingsAccounts | orderBy:'id':true | filter:isSavingNotClosed">
										<td class="pointer" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">
											<i tooltip-placement="right" tooltip="{{savingaccount.status.value}}" class="icon-stop {{savingaccount.status.code | StatusLookup}}"></i>
											{{savingaccount.accountNo}}
										</td>
										<td class="pointer" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">{{savingaccount.productName}}</td>
										<td class="pointer center" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">{{savingaccount.accountBalance}}</td>
										<td class="pointer" ng-if="savingaccount.status.active">
											<a tooltip="{{'label.button.deposit' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/deposit" class="btn btn-primary btn-group ng-binding" 
												ng-show="savingaccount.depositType.id == '100'"><i class="icon-arrow-right icon-white"></i>&nbsp;{{'label.button.deposit' | translate}}
											</a>
											<a tooltip="{{'label.button.deposit' | translate}}" ng-href="#/recurringdepositaccount/{{savingaccount.id}}/deposit" class="btn btn-primary btn-group ng-binding" 
												ng-show="savingaccount.depositType.id == '300'"><i class="icon-arrow-right icon-white"></i>&nbsp;{{'label.button.deposit' | translate}}
											</a>
											<a tooltip="{{'label.button.withdraw' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/withdrawal" class="btn btn-primary btn-group ng-binding" 
												ng-show="savingaccount.depositType.id == '100'"><i class="icon-arrow-left icon-white"></i>&nbsp;{{'label.button.withdraw' | translate}}
											</a>
											<a tooltip="{{'label.button.withdraw' | translate}}" ng-href="#/recurringdepositaccount/{{savingaccount.id}}/withdrawal" class="btn btn-primary btn-group ng-binding" 
												ng-show="savingaccount.depositType.id == '300'"><i class="icon-arrow-left icon-white"></i>&nbsp;{{'label.button.withdraw' | translate}}
											</a>
										</td>
										<td class="pointer" ng-if="savingaccount.status.submittedAndPendingApproval">
											<a tooltip="{{'label.button.approve' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/approve" class="btn btn-success ng-binding pull-left">
												<i class="icon-ok icon-white"></i>&nbsp;{{'label.button.approve' | translate}}
											</a>
										</td>
										<td class="pointer" ng-if="!savingaccount.status.submittedAndPendingApproval &amp;&amp; !savingaccount.status.active">
											<a tooltip="{{'label.button.undoapproval' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/undoapproval" class="btn btn-warning ng-binding pull-left">
												<i class="icon-undo icon-white"></i>&nbsp;{{'label.button.undoapproval' | translate}}
											</a>&nbsp;
											<a tooltip="{{'label.button.activate' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/activate" class="btn btn-success ng-binding pull-left">
												<i class="icon-ok-sign icon-white"></i>&nbsp;{{'label.button.activate' | translate}}
											</a>
										</td>
									</tr>
								</tbody>
							</table>
							<table class="table" data-ng-show="!openSaving">
								<thead>
									<tr class="graybg">
										<th colspan="3" class="boldlabel">
											<strong>{{'label.heading.savingsaccoverview' | translate }}</strong>
											<a class="btn btn-primary btn-group pull-right" ng-click="setSaving()">
												{{ 'label.button.viewactivesavings' | translate }}
												<a class="btn btn-primary btn-group pull-right" ng-click="showSavingDetails=!showSavingDetails">
													<i ng-show="showSavingDetails" class="icon-minus icon-white"></i>
													<i ng-show="!showSavingDetails" class="icon-plus icon-white"></i>
												</a>
											</a>
										</th>
									</tr>
								</thead>
								<thead>
									<tr class="graybg">
										<th>{{'label.heading.accnum' | translate}}</th>
										<th>{{'label.heading.savingaccount' | translate}}</th>
										<th>{{'label.heading.closedate' | translate}}</th>
									</tr>
								</thead>    
								<tbody ng-show="showSavingDetails">
									<tr class="pointer-main" ng-repeat="savingaccount in clientAccounts.savingsAccounts | orderBy:'id':true | filter:isSavingClosed">
										<td class="pointer" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">
											<i tooltip="{{savingaccount.status.value}}" class="icon-stop {{savingaccount.status.code | StatusLookup}}"></i>
											{{savingaccount.accountNo}}
										</td>
										<td class="pointer" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">{{savingaccount.productName}}</td>
										<td class="pointer" data-ng-click="routeToSaving(savingaccount.id, savingaccount.depositType.code)">
											<span data-ng-show="savingaccount.timeline.closedOnDate">{{savingaccount.timeline.closedOnDate | DateFormat}}</span>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</tab>
		<tab heading="{{'label.heading.identities' | translate}}" select="getClientIdentityDocuments()" has-permission='READ_CLIENTIDENTIFIER'>
		    <div class="col-md-12 col-sm-12">
				<div class="row primarydiv">
					<div class="pull-right btn-group">
						<a href="#/addclientidentifier/{{client.id}}" class="btn btn-primary"
						   has-permission='CREATE_CLIENTIDENTIFIER'><i class="icon-plus icon-white"></i>&nbsp;{{ 'label.button.add' | translate }}</a>
					</div>
				</div>
				<div class="row client">
					<table class="table" ng-show="identitydocuments.length > 0">
						<thead>
						<tr class="graybg">
							<th>{{'label.heading.id' | translate}}</th>
							<th>{{'label.heading.description' | translate}}</th>
							<th>{{'label.heading.type' | translate}}</th>
							<th>{{'label.heading.identitydocuments' | translate}}</th>
							<th>{{'label.heading.actions' | translate}}</th>
						</tr>
						</thead>
						<tbody>
						<tr ng-repeat="document in identitydocuments">
							<td>{{document.documentKey}}</td>
							<td>{{document.description}}</td>
							<td>{{document.documentType.name}}</td>
							<td>
							  <span ng-repeat="file in document.documents">
								<div class="row">
									{{file.fileName}}&nbsp;
									<a class="btn btn-primary btn-group pull-right" target="_blank" href="{{hostUrl}}{{file.docUrl}}" has-permission='READ_DOCUMENT'>
									<i class="icon-cloud-download"></i>&nbsp;{{ 'label.button.download' | translate }}</a>
								</div>
							  </span>
							</td>
							<td>
							  <span>
								  <a class="btn btn-primary btn-group pull-left" href="#/addclientidentifierdocument/{{client.id}}/{{document.id}}" has-permission='CREATE_DOCUMENT'>
								  <i class="icon-cloud-upload"></i>&nbsp;{{ 'label.anchor.uploaddocument' | translate }}</a>
								  <a class="btn btn-danger btn-group pull-left" ng-click="deleteClientIdentifierDocument(client.id,document.id,$index)" has-permission='DELETE_CLIENTIDENTIFIER'>
								  <i class="icon-remove"></i>&nbsp;{{ 'label.heading.delete' | translate }}</a>
							  </span>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
		</tab>
		<tab heading="{{'label.heading.documents' | translate}}" select="getClientDocuments()" has-permission='READ_DOCUMENT'>
		    <div class="col-md-12 col-sm-12">
				<div class="row primarydiv">
					<div class="btn-group pull-right">
						<a href="#/addclientdocument/{{client.id}}" class="btn btn-primary" has-permission='CREATE_DOCUMENT'>
							<i class="icon-plus icon-white"></i>&nbsp;{{'label.button.upload' | translate}}</a>
					</div>
				</div>
				<div class="row client">
					<table class="table" ng-show="clientdocuments.length > 0">
						<thead>
							<tr class="graybg">
								<th>{{'label.heading.name' | translate}}</th>
								<th>{{'label.heading.description' | translate}}</th>
								<th>{{'label.heading.filename' | translate}}</th>
								<th>{{'label.heading.actions' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="clientdocument in clientdocuments">
								<td>{{clientdocument.name}}</td>
								<td>{{clientdocument.description}}</td>
								<td>{{clientdocument.fileName}}</td>
								<td>
									<a class="btn btn-primary pull-left" target="_blank" href="{{hostUrl}}{{clientdocument.docUrl}}">
									<i class="icon-cloud-download"></i>&nbsp;{{ 'label.button.download' | translate }}</a>
									<a class="btn btn-danger pull-left" ng-click="deleteDocument(clientdocument.id,$index)">
									<i class="icon-remove"></i>&nbsp;{{ 'label.heading.delete' | translate }}</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</tab>
		<tab heading="{{clientdatatable.registeredTableName}}" ng-repeat="clientdatatable in clientdatatables" select="dataTableChange(clientdatatable)" has-permission='READ_{{clientdatatable.registeredTableName}}'>
		    <div class="col-md-12 col-sm-12">
				<div class="row primarydiv">
					<div data-ng-hide="isClosedClient" class="btn-group pull-right">
						<a ng-show="datatabledetails.isData" class="btn btn-danger pull-right"
						   ng-click="deleteAll(clientdatatable.registeredTableName, client.id)" has-permission='DELETE_{{clientdatatable.registeredTableName}}'>
						   <i class="icon-trash icon-white"></i>&nbsp;{{'label.button.deleteall' | translate}}</a>
						<a data-ng-show="showDataTableAddButton"
						   ng-href="#/makedatatableentry/{{clientdatatable.registeredTableName}}/{{client.id}}?fromEntity=client"
						   class="btn btn-primary" has-permission='CREATE_{{clientdatatable.registeredTableName}}'><i
								class="icon-plus icon-white"></i>&nbsp;{{'label.button.add' | translate}}</a>
						<a data-ng-show="showDataTableEditButton"
						   ng-href="#/viewsingledatatableentry/{{clientdatatable.registeredTableName}}/{{client.id}}?mode=edit"
						   class="btn btn-primary" has-permission='UPDATE_{{clientdatatable.registeredTableName}}'><i
								class="icon-edit icon-white"></i>&nbsp;{{'label.button.edit' | translate}}</a>
					</div>
				</div>
				<div class="row client">	
					<div ng-show="datatabledetails.isData">
						<table class="table" data-ng-show="datatabledetails.isMultirow">
							<thead>
							<th ng-repeat="column in datatabledetails.columnHeaders">{{column.columnName | prettifyDataTableColumn}}</th>
							</thead>
							<tbody>
							<tr class="pointer-main" ng-repeat="data in datatabledetails.data">
								<td class="pointer" ng-repeat="row in data.row track by $index"
									ng-click="viewDataTable(clientdatatable.registeredTableName,data)">{{row}}
								</td>
							</tr>
							</tbody>
						</table>
						<table class="table table-bordered width450px" data-ng-hide="datatabledetails.isMultirow">
							<tr ng-repeat="value in singleRow">
								<td class="graybg table-font-nav">{{value.key | prettifyDataTableColumn}}</td>
								<td><span class="padded-td">{{value.value}}</span></td>
							</tr>
						</table>
					</div>
				</div>
		    </div>
		</tab>
		<tab heading="{{ 'label.heading.notes' | translate }}" has-permission='READ_CLIENTNOTE'>
		    <br/>
		    <form>
		        <div class="form-group">
		            <div class="col-sm-12 col-md-12">
		                <textarea rows="1" class="form-control marginbottom0px" id="textarea"
		                          placeholder="{{'label.input.enternote' | translate}}" ng-model="formData.note"></textarea>
		
		                <div class="notewrapper col-sm-12 col-md-12">
							<span class="pull-right noteaddbuttonwrapper">
								<button class="btn btn-primary" type="submit" ng-click="saveNote()"	has-permission='CREATE_CLIENTNOTE'>
									<i class="icon-plus icon-white"></i>&nbsp;{{'label.button.add' | translate}}
								</button>
							</span>
		                </div>
		            </div>
		        </div>
		    </form>
		    <div class="col-md-12">
		        <br/>		
		        <div ng-repeat="clientNote in clientNotes | orderBy:predicate:reverse">
		            <blockquote>
		                <p>{{clientNote.note}}</p>
		                {{clientNote.id}}
		                <small>{{'label.createdby' | translate}} :&nbsp;{{clientNote.createdByUsername}}</small>
		                <small>{{'label.createdon' | translate}} :&nbsp;{{clientNote.createdOn | DateFormat}}</small>
		            </blockquote>
		        </div>
		    </div>
		</tab>
		<!-- devcode: !production -->
		<!-- ************************ start of InVenture code ************************ -->
		<tab class="inventureTabTitle" heading="{{'label.heading.inventurescore' | translate}}" select="fetchInventureScore()">
		
		    <!-- chart1 - comparison chart -->
		    <div class="col-sm-6 col-md-6 paddedleft0 paddedtop">
		        <div class="inventureMainBorder">
		            <div class="inventureCategoryTitle">
		                <strong class="ng-binding">Score comparison</strong>
		            </div>
		
		            <div class="inventureTooltip" style="margin: -47px 0 0390px;">
		                <a tooltip="{{'label.thegraphbelowcomparesanindividual' | translate}}"><img
		                        src="./images/question-mark.png" alt="Question" height="18px"
		                        width="18px"/></a>
		            </div>
		
		            <div id="inventureBarChart" style="margin: 20px -15px -15px; height:417px;">
		                <svg></svg>
		            </div>
		        </div>
		    </div>
		
		    <!-- chart2 - inventure score chart -->
		    <div class="col-sm-5 col-md-5 paddedtop" style="width:440px;">
		        <div class="inventureMainBorder" style="height:175px;">
		            <div class="inventureCategoryTitle">
		                <strong class="ng-binding">inventure score</strong>
		            </div>
		
		            <div class="inventureTooltip" style="margin: -47px 0 0 390px;">
		                <a tooltip="{{'label.inventurecalculatesapersonsoverall' | translate}}"><img
		                        src="./images/question-mark.png" alt="Question" height="18px"
		                        width="18px"/></a>
		            </div>
		
		            <div id="score" style="margin: 30px 0 -15px;">
		                <p style="text-align: center; font-size: 25px;">Inventure score: <strong>{{inventureScore}}</strong></p>
		            </div>
		
		            <div id="inventureBulletChart" style="margin: 25px 0px -25px -90px; width:500px; height:35px;">
		                <svg></svg>
		            </div>
		
		            <div id="inventureBulletChartLegend" style="margin: 30px 0px 0px -10px;">
		                <table cellspacing="0" cellpadding="0" style="font-size: 14px; margin-left: auto; margin-right: auto;">
		                    <tbody>
		                    <tr>
		                        <td class="inventureBulletLegendCell">300-450<br><strong>bad</strong></td>
		                        <td class="inventureBulletLegendCell">451-550<br><strong>fair</strong></td>
		                        <td class="inventureBulletLegendCell">551-700<br><strong>good</strong></td>
		                        <td class="inventureBulletLegendCell">701-850<br><strong>excellent</strong></td>
		                    </tr>
		                    </tbody>
		                </table>
		            </div>
		        </div>
		    </div>
		
		    <!-- chart3 - inventure loan recommendation -->
		    <div class="col-sm-5 col-md-5" style="padding-top:20px; width:440px;">
		        <div class="inventureMainBorder" style="height:210px;">
		            <div class="inventureCategoryTitle">
		                <strong class="ng-binding">inventure loan recommend</strong>
		            </div>
		
		            <div class="inventureTooltip" style="margin: -47px 0px 0px 390px;">
		                <a tooltip="{{'label.inventureusesallrelevant' | translate}}"><img
		                        src="./images/question-mark.png" alt="Question" height="18px"
		                        width="18px"/></a>
		            </div>
		
		            <div id="inventureRecommendation" style="margin: 35px 0px 0px 0px;">
		                <table cellspacing="10" cellpadding="2" class="inventureRecommendationTable">
		                    <tr>
		                        <td class="inventureRecommendationCellType inventureRecommendationCellTitle">loan type</td>
		                        <td class="inventureRecommendationCellLeftGap"></td>
		                        <td class="inventureRecommendationCellRightGap"></td>
		                        <td class="inventureRecommendationCellType inventureRecommendationCellTitle">creadit limit&#8377;
		                            (Rs)
		                        </td>
		                    </tr>
		                    <tr class="inventureTableTopBorder">
		                        <td class="inventureRecommendationCellType">Agriculture</td>
		                        <td class="inventureRecommendationCellLeftGap"></td>
		                        <td class="inventureRecommendationCellRightGap"></td>
		                        <td class="inventureRecommendationCellAmount">{{inventureAgricultureLimit}}</td>
		                    </tr>
		                    <tr>
		                        <td class="inventureRecommendationCellType">Fishermen</td>
		                        <td class="inventureRecommendationCellLeftGap"></td>
		                        <td class="inventureRecommendationCellRightGap"></td>
		                        <td class="inventureRecommendationCellAmount">{{inventureFishermenLimit}}</td>
		                    </tr>
		                    <tr>
		                        <td class="inventureRecommendationCellType">Housing</td>
		                        <td class="inventureRecommendationCellLeftGap"></td>
		                        <td class="inventureRecommendationCellRightGap"></td>
		                        <td class="inventureRecommendationCellAmount">{{inventureHousingLimit}}</td>
		                    </tr>
		                    <tr>
		                        <td class="inventureRecommendationCellType">Business</td>
		                        <td class="inventureRecommendationCellLeftGap"></td>
		                        <td class="inventureRecommendationCellRightGap"></td>
		                        <td class="inventureRecommendationCellAmount">{{inventureBusinessLimit}}</td>
		                    </tr>
		                </table>
		            </div>
		        </div>
		    </div>
		</tab>
			<!-- ************************ end of InVenture code ************************ -->
			<!-- endcode -->
	</tabset>
</div>
