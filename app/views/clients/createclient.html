<div class="col-md-12" ng-controller="CreateClientController">
    <ul class="breadcrumb">
        <li ng-if="!groupid"><a href="#/clients">{{'label.anchor.clients' | translate}}</a></li>
        <li ng-if="groupid"><a href="#/groups">{{'label.anchor.groups' | translate}}</a></li>
        <li ng-if="groupid"><a href="#/viewgroup/{{groupid}}">{{'label.anchor.viewgroup' | translate}}</a></li>
        <li class="active">{{'label.anchor.createclient' | translate}}</li>
    </ul>
	<form name="createclientform" novalidate="" class="form-horizontal well" rc-submit="submit()">
	    <api-validate></api-validate>
	    <fieldset>
	        <legend>{{'label.heading.createclient' | translate}}</legend>

	        <div class="form-group">
	            <label class="control-label col-sm-2">
	                {{'label.input.office' | translate}} <span ng-show="forceOffice == null" class="required">*</span>
	            </label>

	            <div class="col-sm-3">
	                <div ng-show="forceOffice == null">
	                    <select chosen="offices" id="officeId" ng-model="formData.officeId"  class="form-control"
	                            ng-options="office.id as office.name for office in offices" value="{{office.id}}"
	                            ng-change="changeOffice(formData.officeId)"></select>
	                </div>
	                <div ng-show="forceOffice != null">
	                    <p class="form-control-static">{{forceOffice.name}}</p>
	                </div>
	            </div>
	            <label class="control-label col-sm-2">{{'label.input.staff' | translate}}</label>

	            <div class="col-sm-3">
	                <select chosen="staffs" id="staffId" ng-model="formData.staffId"  class="form-control"
	                        ng-options="staff.id as staff.displayName for staff in staffs" value="{{staff.id}}">
                        <option value="">--{{'label.menu.selectloanofficer' | translate}}--</option>
	                </select>
	            </div>
	        </div>

			<div class="form-group">
				<label class="control-label col-sm-2">{{'label.input.legalForm' | translate}}</label>

				<div class="col-sm-3">
					<select id="legalFormId" ng-model="formData.legalFormId"  class="form-control"
							ng-options="legalForm.id as legalForm.value for legalForm in clientLegalFormOptions" value="{{legalForm.id}}"
							ng-change="displayPersonOrNonPersonOptions(formData.legalFormId)">
						<option value="">--{{'label.menu.legalForm' | translate}}--</option>
					</select>
				</div>
			</div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="false">
					<div class="form-group">
						<label class="control-label col-sm-2" for="firstname">{{ 'label.input.firstname' | translate }}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="text" id="firstname" name="firstname" ng-model="formData.firstname"  class="form-control" required
								   late-Validate/>
						</div>
						<div class="col-sm-2">
							<form-validate valattributeform="createclientform" valattribute="firstname"/>
						</div>
					</div>
				</div>
	       </div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="false">
					<div class="form-group">
						<label class="control-label col-sm-2" for="middlename">{{'label.input.middlename' | translate}}</label>

						<div class="col-sm-3">
							<input type="text" id="middlename" ng-model="formData.middlename"  class="form-control"/>
						</div>
					</div>
				</div>
	        </div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="false">
					<div class="form-group">
						<label class="control-label col-sm-2" for="lastname">{{'label.input.lastname' | translate}}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="text" id="lastname" name="lastname" ng-model="formData.lastname" class="form-control"
								   required late-Validate/>
						</div>
						<div class="col-sm-2">
							<form-validate valattributeform="createclientform" valattribute="lastname"/>
						</div>
					</div>
				</div>
	        </div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="true">
					<div class="form-group">
						<label class="control-label col-sm-2" for="fullname">{{'label.input.fullname' | translate}}<span
								class="required">*</span></label>

						<div class="col-sm-3">
							<input type="text" id="fullname" name="fullname" ng-model="formData.fullname" class="form-control"
								   required late-Validate/>
						</div>
						<div class="col-sm-2">
							<form-validate valattributeform="createclientform" valattribute="fullname"/>
						</div>
					</div>
				</div>
			</div>
	        <div class="form-group">
	            <label class="control-label col-sm-2" for="mobileNo">{{'label.input.mobilenumber' | translate}}</label>

	            <div class="col-sm-3">
	                <input type="text" id="mobileNo" name="mobileNo" ng-model="formData.mobileNo"
	                       ng-pattern="/^[0-9]+$/"  class="form-control"/>
	            </div>
	            <div class="col-sm-2">
	                    <span ng-show="createclientform.mobileNo.$invalid && createclientform.mobileNo.$dirty">
	                      <small class="required" ng-show="createclientform.mobileNo.$error.pattern">
	                          {{'label.mustbenumeric' | translate}}
	                      </small>
		                </span>
	            </div>
	        </div>
	        <div class="form-group">
	            <label class="control-label col-sm-2" ng-hide="showNonPersonOptions">{{'label.input.dateofbirth' | translate}}</label>
				<label class="control-label col-sm-2" ng-show="showNonPersonOptions">{{'label.input.incorporationdate' | translate}}</label>

	            <div class="col-sm-3">
	                <input id="dateofbirth" type="text" name="dateofbirth" datepicker-pop="dd MMMM yyyy"
	                       ng-model="first.dateOfBirth" is-open="opened1" max="restrictDate"  class="form-control"/>
	            </div>
				<div data-ng-switch on="showNonPersonOptions">
					<div data-ng-switch-when="false">
						<label class="control-label col-sm-2">{{'label.input.gender' | translate}}</label>

						<div class="col-sm-3">
							<select id="genderId" ng-model="formData.genderId"  class="form-control"
									ng-options="gender.id as gender.name for gender in genderOptions" value="{{gender.id}}">
								<option value="">--{{'label.menu.gender' | translate}}--</option>
							</select>
						</div>
					</div>
				</div>
				<div data-ng-switch on="showNonPersonOptions">
					<div data-ng-switch-when="true">
						<label class="control-label col-sm-2">{{'label.input.incorpValidityTillDate' | translate}}</label>

						<div class="col-sm-3">
							<input id="incorpValidityTillDate" type="text" name="incorpValidityTillDate" datepicker-pop="dd MMMM yyyy"
								   ng-model="first.incorpValidityTillDate" is-open="opened1" max="'2020-06-22'"  class="form-control"/>
						</div>
					</div>
				</div>
	        </div>

			<div class="form-group">
				<label class="control-label col-sm-2">{{'label.input.clienttype' | translate}}</label>

				<div class="col-sm-3">
					<select id="clienttypeId" ng-model="formData.clientTypeId"  class="form-control"
							ng-options="clienttype.id as clienttype.name for clienttype in clienttypeOptions" value="{{clienttype.id}}">
						<option value="">--{{'label.menu.clienttype' | translate}}--</option>
					</select>
				</div>

				<label class="control-label col-sm-2">{{'label.input.clientclassification' | translate}}</label>

				<div class="col-sm-3">
					<select id="clientClassificationId" ng-model="formData.clientClassificationId"  class="form-control"
							ng-options="clientClassification.id as clientClassification.name for clientClassification in clientClassificationOptions" value="{{clientClassification.id}}">
						<option value="">--{{'label.menu.clientclassification' | translate}}--</option>
					</select>
				</div>
			</div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="true">
					<div class="form-group">
						<label class="control-label col-sm-2" for="incorpNumber">{{'label.input.incorpNumber' | translate}}</label>

						<div class="col-sm-3">
							<input type="text" id="incorpNumber" ng-model="formData.clientNonPersonDetails.incorpNumber"  class="form-control"/>
						</div>

						<label class="control-label col-sm-2">{{'label.input.mainBusinessLine' | translate}}</label>

						<div class="col-sm-3">
							<select id="mainBusinessLineId" ng-model="formData.clientNonPersonDetails.mainBusinessLineId"  class="form-control"
									ng-options="mainBusinessLine.id as mainBusinessLine.name for mainBusinessLine in clientNonPersonMainBusinessLineOptions" value="{{mainBusinessLine.id}}">
								<option value="">--{{'label.menu.mainBusinessLine' | translate}}--</option>
							</select>
						</div>
					</div>
				</div>
			</div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="true">
					<div class="form-group">
						<label class="control-label col-sm-2">{{'label.input.constitution' | translate}}<span
							class="required">*</span></label>

						<div class="col-sm-3">
							<select id="constitutionId" name="constitution" ng-model="formData.clientNonPersonDetails.constitutionId"  class="form-control"
									ng-options="constitution.id as constitution.name for constitution in clientNonPersonConstitutionOptions"
									value="{{constitution.id}}" required late-Validate>
								<option value="">--{{'label.menu.constitution' | translate}}--</option>
							</select>
						</div>
						<div class="col-sm-2">
							<form-validate valattributeform="createclientform" valattribute="constitution"/>
						</div>
					</div>
				</div>
			</div>

			<div data-ng-switch on="showNonPersonOptions">
				<div data-ng-switch-when="true">
					<div class="form-group">
						<label class="control-label col-sm-2" for="remarks">{{'label.input.remarks' | translate}}</label>

						<div class="col-sm-3">
							<textarea type="text" id="remarks" ng-model="formData.clientNonPersonDetails.remarks" rows="4" class="form-control"/>
						</div>
					</div>
				</div>
            </div>
	        <div class="form-group">
	            <label class="control-label col-sm-2" for="externalId">{{'label.input.externalid' | translate}}</label>

	            <div class="col-sm-3">
	                <input type="text" id="externalId" name="externalId" ng-model="formData.externalId"  class="form-control"/>
	            </div>
	        </div>
	        <div class="form-group" has-permission="ACTIVATE_CLIENT">
	            <label class="control-label col-sm-2">{{'label.input.active' | translate}}</label>

	            <div class="col-sm-3">
	                    <input id="activeCheckbox" type="checkbox" ng-model="formData.active" data-ng-change="setChoice()">
	            </div>
		        <div data-ng-switch on="choice">
		            <div data-ng-switch-when="1">
		                <label class="control-label col-sm-2">{{'label.input.activationdate' | translate}}<span class="required">*</span></label>

		                <div class="col-sm-3">
		                    <input id="activationDate" type="text" name="activationdate" datepicker-pop="dd MMMM yyyy"
		                           ng-model="first.date" is-open="opened" min="'2000-01-01'" max="restrictDate"  class="form-control"/>
		                </div>
		            </div>
		        </div>
	        </div>
	        <div class="form-group">
	            <label class="control-label col-sm-2">{{'label.input.submittedon' | translate}}</label>

	            <div class="col-sm-3">
	                <input id="submittedon" type="text" name="submittedon" datepicker-pop="dd MMMM yyyy"
	                       ng-model="first.submitondate" is-open="opened1" min="'2000-01-01'" max="restrictDate"  class="form-control"/>
	            </div>
	        </div>
	        <div class="form-group" ng-show="showSavingOptions">
	            <label class="control-label col-sm-2">{{ 'label.input.opensavingsproduct' | translate }}&nbsp;</label>

	            <div class="col-sm-3">
	                <input id="opensavingsproduct" type="checkbox" ng-model="opensavingsproduct" ng-true-value="true"
	                       ng-false-value="false">
	            </div>
		        <div ng-show="opensavingsproduct">
		            <label class="control-label col-sm-2">{{'label.input.savingproduct' | translate}}</label>

		            <div class="col-sm-3">
		                <select id="savingsProductId" ng-model="formData.savingsProductId"
		                        ng-options="savingProduct.id as savingProduct.name for savingProduct in savingproducts"
		                        value="{{savingProduct.id}}"  class="form-control">
		                    <option value="">--{{'label.menu.selectsavingproduct' | translate}}--</option>
		                </select>
		            </div>
		        </div>
		    </div>
			<div ng-show="enableAddress" class="form-group">

				<div class="form-group">
					<div class="control-label col-sm-2">
						<h3><strong>{{ 'label.input.address' | translate }}</strong>&nbsp;<a ng-click="addAddress()">&nbsp;<i class="icon-plus icon-white"></i></a></h3>

					</div>

				</div>

				<div ng-repeat="addr in addressArray">
					<div class="form-group" ng-show="addresstypId">
						<div class="control-label col-sm-2">
							<label>{{ 'label.input.addressType' | translate }}</label>
						</div>
						<div class="col-sm-3"  >
							<select chosen="addressTypes"  ng-model="addressArray[$index].addressTypeId"  class="form-control"
									ng-options="addressType.id as addressType.name for addressType in addressTypes track by addressType.id"
									value="addressTypeId"  ></select>

						</div>
						&nbsp;&nbsp; <a ng-click="removeAddress($index)">&nbsp;<i class="icon-remove icon-white"></i></a>
					</div>


					<div class="form-group" ng-show="street">
						<div class="control-label col-sm-2">
							<label>{{ 'label.input.street' | translate }}</label>
						</div>
						<div class="col-sm-3">
							<input type="text" name="street"  ng-model="addressArray[$index].street"  class="form-control"/>
						</div>

					</div>


					<div class="form-group" ng-show="address_line_1">
						<label class="control-label col-sm-2" >{{ 'label.input.addressline1' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="addressline1" ng-model="addressArray[$index].address_line_1"  class="form-control">
						</div>

					</div>


					<div class="form-group" ng-show="address_line_2">
						<label class="control-label col-sm-2" >{{ 'label.input.addressline2' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="addressline2" ng-model="addressArray[$index].address_line_2"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="address_line_3">
						<label class="control-label col-sm-2" >{{ 'label.input.addressline3' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="addressline3" ng-model="addressArray[$index].address_line_3"  class="form-control">
						</div>

					</div>


					<div class="form-group" ng-show="city">
						<label class="control-label col-sm-2" >{{ 'label.input.city' | translate }}</label>

						<div class="col-sm-3">
							<input type="text" name="city" ng-model="addressArray[$index].city"  class="form-control">
						</div>

					</div>



					<div class="form-group" ng-show="town_village">
						<label class="control-label col-sm-2" >{{ 'label.input.town_village' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="town_village" ng-model="addressArray[$index].town_village"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="county_district">
						<label class="control-label col-sm-2" >{{ 'label.input.county_district' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="county_district" ng-model="addressArray[$index].county_district"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="state_province">
						<div class="control-label col-sm-2">
							<label>{{ 'label.input.state_province' | translate }}</label>
						</div>
						<div class="col-sm-3" >
							<select chosen="stateOptions"  ng-model="addressArray[$index].state_province_id"  class="form-control"
									ng-options="stateOption.id as stateOption.name for stateOption in stateOptions track by stateOption.id"
									value="state_province_id"></select>
						</div>
					</div>
					<div>

					</div>

					<div class="form-group" ng-show="country">
						<div class="control-label col-sm-2">
							<label>{{ 'label.input.country' | translate }}</label>
						</div>
						<div class="col-sm-3" >
							<select chosen="countryOptions"  ng-model="addressArray[$index].country_id"  class="form-control"
									ng-options="countryOption.id as countryOption.name for countryOption in countryOptions track by countryOption.id"
									value="country_id"></select>
						</div>
					</div>

					<div class="form-group" ng-show="postal_code">
						<label class="control-label col-sm-2" >{{ 'label.input.postal_code' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="postal_code" ng-model="addressArray[$index].postal_code"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="latitue">
						<label class="control-label col-sm-2" >{{ 'label.input.latitude' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="latitude" ng-model="addressArray[$index].latitude"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="longitude">
						<label class="control-label col-sm-2" >{{ 'label.input.longitude' | translate }}</label>

						<div class="col-sm-3">
							<input type="text"  name="longitude" ng-model="addressArray[$index].longitude"  class="form-control">
						</div>

					</div>

					<div class="form-group" ng-show="isActive">

						<label class="control-label col-sm-2" >{{'label.input.is_active' | translate}} </label>
						<div class="col-sm-3">
							<input class="input-mini-small" type="checkbox"
								   ng-model="addressArray[$index].is_active">
						</div>
					</div>

				</div>

			</div>
		    <div class="col-md-offset-5">
	            <a id="cancel" ng-href="{{cancel}}" class="btn btn-default">{{'label.button.cancel' | translate}}</a>
	            <button id="save" type="submit" class="btn btn-primary"  ng-hide="blockUI" has-permission='CREATE_CLIENT'>{{'label.button.save' | translate}}</button>
                <button class="btn btn-info" ng-show="blockUI"><strong>{{'label.button.processing' | translate}}</strong></button>
	        </div>
	    </fieldset>
	</form>
</div>
