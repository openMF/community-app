<div class="content-container" ng-controller="CreateShareAccountController">
    <ul class="breadcrumb">
        <li ng-show="clientName"><a href="#/viewclient/{{clientId}}"><strong>'{{clientName}}'</strong></a></li>
        <li class="active">{{'label.anchor.sharesapplication' | translate}}</li>
    </ul>
<api-validate></api-validate>
<div class="card">
    <div class="content">
        <div class="toolbar">
            <h4>{{ 'label.heading.sharesapplication' | translate }}</h4>
        </div>
        <br>
        <form name="newshareccountform" novalidate="" class="form-inline" 
            rc-submit="submit()">
            <fieldset>
            <div style="display:flex; flex-direction:row; justify-content:center;">
            <div style="display:flex; flex-direction:column; flex-grow:1;">
                <div style="display:flex; flex-direction:row; justify-content:flex-start;">
                    <label style="width:200px;">{{ 'label.input.product' | translate }}<span class="required">*</span>:&nbsp;</label>
                    <select id="productId" ng-model="formData.productId"
                            ng-options="product.id as product.name for product in products" value="{{product.id}}"
                            ng-change="changeProduct()" class="form-control" required="required" style="width:185px;">
                        <option style="display:none" value="">{{'label.selectshareproduct' | translate}}</option>
                    </select>
                </div>
                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                    <label ng-show="formData.productId" class="control-label" style="width:200px;">{{ 'label.input.submittedon' | translate
                        }}&nbsp;<span class="required">*</span></label>
                    <input ng-show="formData.productId" id="submittedOnDate" sort type="text" datepicker-pop="dd MMMM yyyy" ng-model="formData.submittedDate" is-open="opened" min="minDate" max="restrictDate" class="form-control" style="width:185px;"/>
                </div>
            </div>
            <div ng-show="formData.productId" style="display:flex; flex-direction:column; flex-grow:1;">
                <div style="display:flex; flex-direction:row; justify-content:flex-start;">
                    <label ng-show="formData.productId" class="control-label" style="width:200px;">{{ 'label.input.externalid' | translate
                        }}</label>
                    <input ng-show="formData.productId" id="externalId" ng-model="formData.externalId" class="form-control" style="width:185px;"/>
                </div>
            </div>
        </div>
        <hr data-ng-show="formData.productId"/>
        <label ng-show="data"><strong>{{ 'label.heading.terms' | translate }}</strong></label>

        <div ng-show="data">
        <div style="display:flex; flex-direction:row; justify-content:center;">
            <div style="display:flex; flex-direction:column; flex-grow:1;">
                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.heading.currency' | translate }}</label>
                <label><b>{{data.currency.name}}({{data.currency.displaySymbol}})</b></label>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.totalnumberofshares' | translate
                        }}&nbsp;<span class="required">*</span></label>
                <input id="requestedShares" type="text"
                           name="requestedShares"
                           ng-model="formData.requestedShares" style="width:185px;" class="form-control"
                           number-format required late-Validate/>
                    <form-validate valattributeform="newshareccountform"
                                   valattribute="requestedShares"/>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.currencyinmultiplesof' | translate }}&nbsp;</label>
                <input type="text" value="{{data.currency.inMultiplesOf}}"
                           class="form-control" style="width:185px;" readonly/>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.minimumactiveperiod' | translate }}&nbsp;</label>
                <div class="form-inline" style="width:185px;">
                        <input id="minimumActivePeriod" type="text" class="form-control"
                               ng-model="formData.minimumActivePeriod" style="width:185px;">&nbsp;
                        <select id="minimumActivePeriodFrequencyType" ng-model="formData.minimumActivePeriodFrequencyType"
                                class="form-control"
                                style="width:185px;"
                                ng-options="type.id as type.value for type in data.minimumActivePeriodFrequencyTypeOptions"
                                value="{{type.id}}">
                            <option value="">{{'label.selectone' | translate}}</option>
                        </select>
                </div>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                 <label ng-show="formData.productId" class="control-label" style="width:200px;">{{ 'label.input.applicationdate' | translate
                        }}&nbsp;<span class="required">*</span></label>

                    <input ng-show="formData.productId" id="applicationdate" sort type="text" datepicker-pop="dd MMMM yyyy"
                           ng-model="formData.applicationDate" is-open="opened" min="minDate" max="restrictDate"
                           class="form-control" style="width:185px;"/>
                 </div>
             </div>

            <div style="display:flex; flex-direction:column; flex-grow:1;">
                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">              
                <label class="control-label" style="width:200px;">{{ 'label.heading.decimalplaces' | translate}}</label>
                <label><b>{{data.currency.decimalPlaces}}</b></label>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.todaysprice' | translate
                        }}&nbsp;<span class="required">*</span></label>
                <input id="nominalpricevalue" type="text" disabled
                           name="nominalpricevalue"
                           style="width:185px;"
                           ng-model="formData.unitPrice" class="form-control"
                           number-format required late-Validate/>
                </div>
                
                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.savingsaccount' | translate }}&nbsp;<span
                            class="required">*</span></label>
                <select id="savingsAccountId" ng-model="formData.savingsAccountId"
                            ng-options="savingsAccount.id as savingsAccount.accountNo for savingsAccount in data.clientSavingsAccounts"
                            style="width:185px;"
                            value="{{savingsAccount.id}}" class="form-control width170px">
                        <option value="">{{'label.selectone' | translate}}</option>
                </select>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <label class="control-label" style="width:200px;">{{ 'label.input.lockinPeriodFrequency' | translate }}</label>
                <div class="form-inline" style="width:185px;">
                        <input id="lockinPeriodFrequency" type="text" class="form-control"
                               ng-model="formData.lockinPeriodFrequency" style="width:185px;">&nbsp;
                        <select id="lockinPeriodFrequencyType" ng-model="formData.lockinPeriodFrequencyType"
                                class="form-control"
                                style="width:185px;"
                                ng-options="type.id as type.value for type in data.lockinPeriodFrequencyTypeOptions"
                                value="{{type.id}}">
                            <option value="">{{'label.selectone' | translate}}</option>
                        </select>
                </div>
                </div>

                <div style="display:flex; flex-direction:row; justify-content:flex-start; margin-top:20px;">
                <input type="checkbox" ng-model="formData.allowDividendCalculationForInactiveClients" style="width:185px;">&nbsp;
                <label class="control-label" style="width:200px; padding-left:10px;">{{ 'label.input.allowdividendsforinactiveclients' | translate }}&nbsp;</label>
                </div>
            </div>
        </div>

        <hr/>
        <label class="control-label"><h4>{{ 'label.heading.charges' | translate }}</h4></label>
        <select ng-model="chargeId"
                ng-options="charge.id as charge.name for charge in chargeOptions|filter:data.currency.code:strict"
                value="{{charge.id}}" class="form-control">
            <option value="">{{'label.selectcharge' | translate}}</option>
        </select>
        <a ng-click="addCharge(chargeId)"><i class="fa fa-plus "></i></a>
                              <span ng-show="errorchargeevent">
                                <small class="error">
                                    {{'label.'+labelchargeerror | translate}}
                                </small>
                              </span>

        <table class="table width80" ng-show="charges.length>0">
            <tr class="graybg">
                <th>{{'label.heading.name' | translate}}</th>
                <th>{{'label.heading.type' | translate}}</th>
                <th>{{'label.heading.amount' | translate}}</th>
                <th>{{'label.heading.collectedon' | translate}}</th>
                <th>{{'label.heading.actions' | translate}}</th>
            </tr>
            <tr ng-repeat="charge in charges">
                <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                <td>{{charge.chargeCalculationType.value}}</td>
                <td><input id="charges[{{$index}}].amount" class="input-sm form-control" type="text"
                           ng-model="charge.amount" number-format
                           placeholder="{{'label.input.amount' | translate}}"/></td>
                <td>{{charge.chargeTimeType.value}}</td>
                <td><a ng-click="deleteCharge($index)"><i class="fa fa-remove "></i></a></td>
            </tr>
        </table>
        </div>
        <div class="col-md-offset-6">
            <button id="cancel" ng-click="cancel()" class="btn btn-default">{{ 'label.button.cancel' | translate }}</button>
            <button id="save" type="submit" class="btn btn-primary" ng-show="data" has-permission='CREATE_SHAREACCOUNT'>{{
                'label.button.save' | translate
                }}
            </button>
        </div>
        </fieldset>
        </form>
    </div>
</div>
</div>