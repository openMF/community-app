<div class="col-md-12" ng-controller="ViewCenterController">
	<div>
	    <ul class="breadcrumb">
	        <li>{{center.officeName}}</li>
	        <li class="active">{{center.name}}</li>
	    </ul>
	</div>
	<hr style="margin-bottom:0; margin-top:0">
	<div>
	    <ul class="breadcrumb">
			<li>
				<h3 class="client-title">
					<i class="icon-circle {{center.status.code | StatusLookup}}"></i>&nbsp;
					<i class="icon-map-marker"></i>&nbsp;
					<strong>{{center.name}} </strong>
				</h3>
			</li>
			<li>
	            <i class="icon-barcode"></i>&nbsp; 
	            <small>{{ 'label.uniquelyidentifiedwithid' | translate }} {{center.id}} </small> 
	        </li>
			<li>
				<i class="icon-building"></i>&nbsp; 
				<small>{{ 'label.heading.office' | translate }} "{{center.officeName}}" </small>
			</li>
	    </ul>
	</div>
	
	<script type="text/ng-template" id="deleteCenter.html">
		<div class="modal-header silver">
			<h3 class="bolder">{{'label.heading.delete' | translate}}</h3>
		</div>
		<div class="modal-body">
			<api-validate></api-validate>
        </div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
			<button class="btn btn-primary" ng-click="delete()">{{'label.button.confirm' | translate}}</button>
		</div>
	</script>
	
	<script type="text/ng-template" id="unassignstaff.html">
		<div class="modal-header silver">
			<h3 class="bolder">{{'label.heading.unassignstaff' | translate}}</h3>
		</div>
		<div class="modal-body ">
			<api-validate></api-validate>
        </div>
		<div class="modal-footer">
			<button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
			<button class="btn btn-primary" ng-click="unassign()">{{'label.button.confirm' | translate}}</button>
		</div>
	</script>
	<div>
		<tabset>
			<tab heading="{{ 'label.heading.general' | translate }}">
			    <div class="col-md-12 col-sm-12">
					<div class="row primarydiv" data-ng-hide="center.status.value == 'Closed'">
			            <div class="btn-group pull-right">
			                <a href="#/editcenter/{{center.id}}?managecode=1" class="btn btn-primary" data-ng-hide="center.status.value=='Active'" has-permission='ACTIVATE_CENTER'>
								<i class="icon-check-sign icon-white"></i>&nbsp;{{'label.button.activate' | translate }}</a>
			                <a href="#/editcenter/{{center.id}}?managecode=2" class="btn btn-primary" has-permission='UPDATE_CENTER'>
			                    <i class="icon-edit icon-white"></i>&nbsp;{{ 'label.button.edit' | translate }}</a>
			                <a href="#/addgroup?centerId={{center.id}}&officeId={{center.officeId}}" class="btn btn-primary" has-permission='CREATE_GROUP'>
								<i class="icon-plus-sign-alt icon-white"></i>&nbsp;{{ 'addgroup' | translate }}</a>
                            <a href="#/managegroupmembers/{{center.id}}" class="btn btn-primary" has-permission='ASSOCIATEGROUPS_CENTER'>
                                <i class="icon-edit icon-white"></i>&nbsp;{{'label.button.managegroups' | translate }}</a>
			                <span class="btn-group dropdown" on-toggle="toggled(open)">
			                      <a class="btn btn-primary dropdown-toggle">
			                          {{ 'label.button.more' | translate}}
			                          <span class="caret"></span>
			                      </a>
			                      <ul class="dropdown dropdown-menu dropdown-menu-right">
			                         <li>
                                          <a href="#/centerattendance?centerId={{center.id}}&calendarId={{meeting.id}}"
                                              data-ng-show="center.collectionMeetingCalendar" has-permission='SAVEORUPDATEATTENDANCE_MEETING'>
											  {{ 'label.button.attendance' | translate }}</a>  			                        
			                         </li>
			                          <li>
			                              <a href="#/assignstaff/{{center.id}}/centers" data-ng-hide="center.staffId" has-permission='ASSIGNSTAFF_GROUP'>
											{{ 'label.button.assignstaff' | translate }}</a>
			                          </li>
			                          <li>
			                              <a data-ng-click="unassignStaffCenter()" data-ng-show="center.staffId" has-permission='UNASSIGNSTAFF_GROUP'>
											{{ 'label.button.unassignstaff' | translate }}</a>
			                          </li>
			                          <li>
			                              <a data-ng-click="deleteCenter()" data-ng-hide="center.status.value=='Active'" has-permission='DELETE_CENTER'>
											{{ 'label.button.delete' | translate }}</a>
			                          </li>
			                          <li>
			                              <a href="#/closecenter/{{center.id}}" has-permission='CLOSE_CENTER'>{{ 'label.button.close' | translate }}</a>
			                          </li>
			                          <li data-ng-show="center.status.value=='Active'">
			                              <a href="#/attachmeeting/{{center.id}}/centers" data-ng-hide="center.collectionMeetingCalendar" has-permission='CREATE_MEETING'>
											{{ 'label.button.attachmeeting' | translate }}</a>
			                          </li>
			                      </ul>
			                  </span>
			            </div>
			        </div>
					<div class="row client">
						<table class="table table-striped">
							<thead>
								<tr class="graybg">
									<th colspan="4" class="boldlabel">
										<strong>{{center.name}} {{ 'label.heading.details' | translate }}</strong>
										<a class="btn btn-primary btn-group pull-right" ng-click="showDetails=!showDetails">
											<i ng-show="showDetails" class="icon-minus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.hidedetails' | translate }}</i>
											<i ng-show="!showDetails" class="icon-plus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.showdetails' | translate }}</i>
										</a>
									</th>
								</tr>
							</thead>
							<tbody ng-show="showDetails">
								<tr>
									<th width="25%" class="table-bold">{{ 'label.heading.activationdate' | translate }}</th>
									<td width="25%"><span data-ng-show="center.activationDate" class="padded-td">{{center.activationDate | DateFormat}}</span></td>
									
									<th width="25%" class="table-bold">&nbsp;&nbsp;{{ 'label.input.externalid' | translate }}</th>
									<td width="25%"><span data-ng-show="center.externalId" class="padded-td">{{center.externalId}}</span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.heading.staff' | translate }}</th>
									<td><span data-ng-show="center.staffName" class="padded-td">{{center.staffName}}</span></td>
								
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveclient' | translate }}</th>
									<td><span class="padded-td">{{summary.activeClients}}</span></td>
								</tr>
								<tr class="graybg">
									<th colspan="4" class="boldlabel">
										<strong>{{ 'label.heading.meetingdetails' | translate }}</strong>
									</th>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.heading.nextmeetingon' | translate }}</th>
									<td><span class="padded-td">{{center.collectionMeetingCalendar.nextTenRecurringDates[0] | DateFormat}}&nbsp;
										<a href="#/editcalendar/centers/{{center.id}}/{{center.collectionMeetingCalendar.id}}" ng-show="center.collectionMeetingCalendar" has-permission='UPDATE_MEETING'>
										<i class="icon-edit icon-white"></i></a><span class="marginleftn7px" data-ng-hide="center.collectionMeetingCalendar.nextTenRecurringDates[0]">{{ 'label.unassigned' | translate }}</span></span>
									</td>
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.heading.meetingfrequency' | translate }}</th>
									<td><span data-ng-show="center.collectionMeetingCalendar.humanReadable" class="padded-td">{{center.collectionMeetingCalendar.humanReadable}}</span></td>
								</tr>
								<tr class="graybg">
									<th colspan="4" class="boldlabel">
										<strong>{{ 'label.heading.summary' | translate }}</strong>
									</th>
								</tr>								
								<tr>
									<th width="25%" class="table-bold">{{ 'label.numofactivegrouploans' | translate }}</th>
									<td width="25%"><span class="padded-td">{{summary.activeGroupLoans}}</span></td>
									
									<th width="25%" class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveclientborrowers' | translate }}</th>
									<td width="25%"><span class="padded-td">{{summary.activeClientBorrowers}}</span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.numofactiveclientloans' | translate }}</th>
									<td><span class="padded-td">{{summary.activeGroupLoans}}</span></td>
									
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveoverduegrouploans' | translate }}</th>
									<td><span class="padded-td">{{summary.overdueGroupLoans}}</span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.numofactivegroupborrowers' | translate }}</th>
									<td><span class="padded-td">{{summary.activeGroupBorrowers}}</span></td>
									
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveoverdueclientloans' | translate }}</th>
									<td><span class="padded-td">{{summary.overdueClientLoans}}</span></td>
								</tr>
								<tr data-ng-show="center.status.value=='Closed'">
									<th colspan="4" class="table-bold">{{ 'label.heading.closedate' | translate }}</th>
									<td><span class="padded-td">{{center.timeline.closedOnDate | DateFormat}}</span></td>
								</tr>
							</tbody>
						</table>
						<hr>
						<div data-ng-show="center.status.value=='Closed'">
							<h3>{{'label.heading.centerclosed' | translate}}</h3>
						</div>
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title ng-binding">{{ 'label.heading.groups' | translate }}</h3>
							</div>
							<div class="panel-body">
								<input ng-show="center.groupMembers" ng-autofocus="true" ng-model="filterText" type="text" class="marginbottom0px form-control"
									placeholder="{{'label.input.filterbyname' | translate}}">
								<hr ng-show="center.groupMembers" style="margin-bottom:0; margin-top:0">
								<div class="list-group">
									<a href="#/viewgroup/{{group.id}}" ng-repeat="group in center.groupMembers | filter:filterText" class="list-group-item">
										<i tooltip="{{group.status.value}}" class="icon-stop {{group.status.code | StatusLookup}}"></i>&nbsp;&nbsp;{{group.name}}
									</a>
									<p ng-if="!center.groupMembers" class="list-group-item">No Groups added.</p>
								</div>
							</div>
						</div>
					</div>
			    </div>
			</tab>
<!--		<tab heading="{{'label.heading.accounts' | translate}}">
			    <div class="col-md-12 col-sm-12">
			        <div class="row primarydiv" data-ng-hide="center.status.value == 'Closed'">
			            <div class="btn-group pull-right">
			                <a ng-show="center.active" href="#/new_group_saving_application/{{center.id}}/center" has-permission='CREATE_SAVINGSACCOUNT'
			                   class="btn btn-primary"><i class="icon-file icon-white"></i>&nbsp;{{ 'label.button.centersavingapplication' | translate }}</a>
						</div>
					</div>
					<div class="row client">
						<table class="table table-striped">
							<thead>
								<tr class="graybg">
									<th colspan="4" class="boldlabel">
										<strong>{{ 'label.heading.summary' | translate }}</strong>							
										<a class="btn btn-primary btn-group pull-right" ng-click="showSummaryDetails=!showSummaryDetails">
											<i ng-show="showSummaryDetails" class="icon-minus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.hidedetails' | translate }}</i>
											<i ng-show="!showSummaryDetails" class="icon-plus icon-white">&nbsp;&nbsp;&nbsp;{{'label.button.showdetails' | translate }}</i>
										</a>
									</th>
								</tr>
							</thead>
							<tbody ng-show="showSummaryDetails">
								<tr>
									<th width="25%" class="table-bold">{{ 'label.numofactivegrouploans' | translate }}</th>
								  <td width="25%"><span class="padded-td">{{summary.activeGroupLoans}}</span></td>
									
								  <th width="25%" class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveclientborrowers' | translate }}</th>
								  <td width="25%"><span class="padded-td">{{summary.activeClientBorrowers}}</span></td>
							  </tr>
								<tr>
									<th class="table-bold">{{ 'label.numofactiveclientloans' | translate }}</th>
									<td><span class="padded-td">{{summary.activeGroupLoans}}</span></td>
									
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveoverduegrouploans' | translate }}</th>
									<td><span class="padded-td">{{summary.overdueGroupLoans}}</span></td>
								</tr>
								<tr>
									<th class="table-bold">{{ 'label.numofactivegroupborrowers' | translate }}</th>
									<td><span class="padded-td">{{summary.activeGroupBorrowers}}</span></td>
									
									<th class="table-bold">&nbsp;&nbsp;{{ 'label.numofactiveoverdueclientloans' | translate }}</th>
									<td><span class="padded-td">{{summary.overdueClientLoans}}</span></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="row client">
							<div data-ng-show="accounts.savingsAccounts">
								<table class="table">
									<thead>
										<tr class="graybg">
											<th colspan="4" class="boldlabel">
												<strong>{{'label.heading.savingsaccoverview' | translate }}</strong>
											</th>
										</tr>
									</thead>    
									<thead>
										<tr class="graybg">
											<th>{{ 'label.heading.accnum' | translate }}</th>
											<th>{{ 'label.heading.products' | translate }}</th>
											<th>{{ 'label.heading.balance' | translate }}</th>
											<th>{{ 'label.heading.actions' | translate }}</th>
										</tr>
									</thead>
									<tbody>
										<tr class="pointer-main"
											ng-repeat="savingaccount in accounts.savingsAccounts | orderBy:'productName':reverse">
											<td class="pointer" data-ng-click="routeTo(savingaccount.id)">
												<i tooltip-placement="left" tooltip="{{savingaccount.status.value}}" class="icon-stop {{savingaccount.status.code | StatusLookup}}"></i>
												{{savingaccount.accountNo}}
											</td>
											<td class="pointer" data-ng-click="routeTo(savingaccount.id)">{{savingaccount.productName}}</td>
											<td class="pointer" data-ng-click="routeTo(savingaccount.id)">{{savingaccount.accountBalance}}</td>
											<td class="pointer" ng-if="savingaccount.status.active">
												<a tooltip="{{'label.button.deposit' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/deposit" class="btn btn-primary btn-group ng-binding" 
													ng-show="savingaccount.depositType.id == '100'"><i class="icon-arrow-right icon-white"></i>&nbsp;{{'label.button.deposit' | translate}}
												</a>
												<a tooltip="{{'label.button.deposit' | translate}}" ng-href="#/recurringdepositaccount/{{savingaccount.id}}/deposit" class="btn btn-primary btn-group ng-binding" 
													ng-show="savingaccount.depositType.id == '300'"><i class="icon-arrow-right icon-white"></i>&nbsp;{{'label.button.deposit' | translate}}
												</a>
												<a tooltip="{{'label.button.withdraw' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/withdrawal" class="btn btn-primary btn-group ng-binding" 
													ng-show="savingaccount.depositType.id == '100'"><i class="icon-arrow-left icon-white"></i>&nbsp;{{'label.button.withdraw' | translate}}
												</a>
												<a tooltip="{{'label.button.withdraw' | translate}}" ng-href="#/recurringdepositaccount/{{savingaccount.id}}/withdrawal" class="btn btn-primary btn-group ng-binding" 
													ng-show="savingaccount.depositType.id == '300'"><i class="icon-arrow-left icon-white"></i>&nbsp;{{'label.button.withdraw' | translate}}
												</a>
											</td>
											<td class="pointer" ng-if="savingaccount.status.submittedAndPendingApproval">
												<a tooltip="{{'label.button.approve' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/approve" class="btn btn-success btn-group ng-binding">
													<i class="icon-ok icon-white"></i>&nbsp;{{'label.button.approve' | translate}}
												</a>
											</td>
											<td class="pointer" ng-if="!savingaccount.status.submittedAndPendingApproval && !savingaccount.status.active">
												<a tooltip="{{'label.button.undoapproval' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/undoapproval" class="btn btn-warning btn-group ng-binding">
													<i class="icon-undo icon-white"></i>&nbsp;{{'label.button.undoapproval' | translate}}
												</a>
												<a tooltip="{{'label.button.activate' | translate}}" ng-href="#/savingaccount/{{savingaccount.id}}/activate" class="btn btn-success btn-group ng-binding">
													<i class="icon-ok-sign icon-white"></i>&nbsp;{{'label.button.activate' | translate}}
												</a>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
					</div>
				</div>
			</tab>-->
			<tab heading="{{centerdatatable.registeredTableName}}" ng-repeat="centerdatatable in centerdatatables" has-permission='READ_{{centerdatatable.registeredTableName}}' select="dataTableChange(centerdatatable)">
			    <div class="col-md-12 col-sm-12">
			        <div data-ng-hide="isClosedCenter" class="row primarydiv"> 
						<div class="btn-group pull-right">
							<a ng-show="datatabledetails.isData" class="btn btn-danger pull-right" ng-click="deleteAll(centerdatatable.registeredTableName, center.id)"
							   has-permission='DELETE_{{centerdatatable.registeredTableName}}'><i class="icon-trash icon-white"></i>&nbsp;{{'label.button.deleteall' | translate}}
							</a>
							<a data-ng-show="showDataTableAddButton" ng-href="#/makedatatableentry/{{centerdatatable.registeredTableName}}/{{center.id}}?fromEntity=center"
							   class="btn btn-primary" has-permission='CREATE_{{centerdatatable.registeredTableName}}'><i class="icon-plus icon-white"></i>&nbsp;{{'label.button.add' | translate}}
							</a>
							<a data-ng-show="showDataTableEditButton" ng-href="#/viewsingledatatableentry/{{centerdatatable.registeredTableName}}/{{center.id}}?mode=edit"
							   class="btn btn-primary" has-permission='UPDATE_{{centerdatatable.registeredTableName}}'><i class="icon-edit icon-white"></i>&nbsp;{{'label.button.edit' | translate}}
							</a>
						</div>
					</div>
					<div class="row client">	
						<div data-ng-show="datatabledetails.isData">
							<table class="table" data-ng-show="datatabledetails.isMultirow">
								<thead>
								<th ng-repeat="column in datatabledetails.columnHeaders">{{column.columnName | prettifyDataTableColumn}}</th>
								</thead>
								<tbody>
									<tr class="pointer-main" ng-repeat="data in datatabledetails.data">
										<td ng-repeat="row in data.row track by $index" class="pointer" ng-click="viewDataTable(centerdatatable.registeredTableName,data)">{{row}}</td>
									</tr>
								</tbody>
							</table>
							<table class="table table-bordered width450px" data-ng-hide="datatabledetails.isMultirow">
								<tr ng-repeat="value in singleRow">
									<td class="graybg table-font-nav">{{value.key | prettifyDataTableColumn}}</td>
									<td><span class="padded-td">{{value.value}}</span></td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</tab>
			<tab heading="{{ 'label.heading.notes' | translate }}" has-permission='READ_GROUPNOTE'>
			    <br/>			
			    <form>
			        <div class="form-group">
			            <div class="col-sm-12 col-md-12">
			                <textarea rows="1" class="form-control marginbottom0px" id="textarea"
			                    placeholder="{{ 'label.input.enternote' | translate }}" ng-model="formData.note"></textarea>			
			                <div class="notewrapper col-md-12">
								<span class="pull-right noteaddbuttonwrapper">
									<button class="btn btn-primary" type="submit" ng-click="saveNote()" has-permission='CREATE_GROUPNOTE'>
									<i class="icon-plus-sign-alt icon-white"></i>&nbsp;{{ 'label.button.add' | translate }} </button>
								</span>
			                </div>
			            </div>
			        </div>
			    </form>
				<div class="col-md-12">
					<br/>
					<div ng-repeat="note in notes | orderBy:predicate:reverse">
				        <blockquote>
				            <p>{{note.note}}</p>
				            {{note.id}}
				            <small>{{'label.createdby' | translate}} :&nbsp;{{note.createdByUsername}}</small>
				            <small>{{'label.createdon' | translate}} :&nbsp;{{note.createdOn | DateFormat}}</small>
				        </blockquote>
					</div>
				</div>
			</tab>
		</tabset>
	</div>
</div>

